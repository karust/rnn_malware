<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        HackMD - Collaborative markdown notes
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/emojify.js/1.1.0/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.markdown-body{font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{font-size:16px;padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.markdown-body kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif;padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram{text-align:center;background-color:inherit;border-radius:0;white-space:inherit}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p,.markdown-body .alert>ul{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.MJX_Assistive_MathML{display:none}.ui-infobar{position:relative;z-index:2;max-width:760px;margin:25px auto -25px;padding:0 15px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:998}.ui-toc-label{opacity:.3;background-color:#ccc;border:none;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:23px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child > ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}.ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}.markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}.ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}.markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}.ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:3px;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;font-family:Source Sans Pro,Helvetica,Arial,sans-serif;letter-spacing:.025em}.focus,:focus{outline:none!important}::-moz-focus-inner{border:0!important}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-enabled" style="position: relative;"><h2 id="CCF-Project-Collection-of-malware-dynamic-analysis-data-for-implementing-behavioral-malware-detection-based-on-Recurrent-neural-network" style=""><a class="anchor hidden-xs" href="#CCF-Project-Collection-of-malware-dynamic-analysis-data-for-implementing-behavioral-malware-detection-based-on-Recurrent-neural-network" title="CCF-Project-Collection-of-malware-dynamic-analysis-data-for-implementing-behavioral-malware-detection-based-on-Recurrent-neural-network"><span class="octicon octicon-link"></span></a>CCF Project: Collection of malware dynamic analysis data for implementing behavioral malware detection based on Recurrent neural network</h2><p>Team:</p><ul>
<li>Rustem Kamalov</li>
<li>Alexey Gorodetskiy</li>
<li>Dmitriy Creed</li>
</ul><h2 id="Abstract" style=""><a class="anchor hidden-xs" href="#Abstract" title="Abstract"><span class="octicon octicon-link"></span></a>Abstract</h2><p>In this work we will develop method of collection dynamic analyzis data from malwares. Then we will try train recurrent neural network for detection of malicious actions of executable.</p><h2 id="Introduction" style=""><a class="anchor hidden-xs" href="#Introduction" title="Introduction"><span class="octicon octicon-link"></span></a>Introduction</h2><p>Today’s anti-virus systems use different methods to detect malware usually it is signature-based methods and dynamic analysis of behavior in a sandbox. These methods are not ultimate and not always detect virus threats. On the other hand, we have algorithms like neural networks (NN) that are able to do classification and regression task with high efficiency if trained on a large amount of data. Therefore it is possible to implement a malware classification or detector based on a neural network.  There are two approaches in which NN can be applied it is simple <code>perceptron</code> model of neural network for static analysis data classification task and recurrent NN for analysis of the behavior of malware. In this work, we will try to analyze approaches of collecting dynamic analysis data and try to implement a proof of concept model using recurrent NN.</p><h2 id="Novelty" style=""><a class="anchor hidden-xs" href="#Novelty" title="Novelty"><span class="octicon octicon-link"></span></a>Novelty</h2><p>Currently, there are no known solutions that using RNN for malware detections, but there are already some researches conduct most of them are fresh (2016, 2018, 2019 years).</p><h2 id="Related-work" style=""><a class="anchor hidden-xs" href="#Related-work" title="Related-work"><span class="octicon octicon-link"></span></a>Related work</h2><p>From the related work we can highlight the following researches and a patent:</p><ul>
<li>Malware Detection with Deep Neural Network Using Process Behavior [1]</li>
<li>Early-stage malware prediction using recurrent neural networks [2]</li>
<li>Recurrent	neural networks for	malware	detection [3]</li>
<li>Recurrent neural networks for malware analysis [4]</li>
<li>Behavioral Malware Classification using Convolutional Recurrent Neural Network [5]</li>
<li>Malware Detection with Neural Network Using Combined Features [6]</li>
</ul><h2 id="Project-goals" style=""><a class="anchor hidden-xs" href="#Project-goals" title="Project-goals"><span class="octicon octicon-link"></span></a>Project goals</h2><ul>
<li>Analyze which dynamic data can be acquired from executables;</li>
<li>Investigate open-source solution(-s) that perform dynamic analysis of malware;</li>
<li>Conduct dynamic analysis data mining from malware;</li>
<li>Prepare data for training in a recurrent neural network;</li>
<li>Train and test RNN and evaluate results;</li>
<li>(Optional) Build a proof of concept application;</li>
</ul><h2 id="Collection-of-malware-dynamic-analysis-data-for-implementing-behavioral-malware-detection-based-on-Recurrent-neural-network" style=""><a class="anchor hidden-xs" href="#Collection-of-malware-dynamic-analysis-data-for-implementing-behavioral-malware-detection-based-on-Recurrent-neural-network" title="Collection-of-malware-dynamic-analysis-data-for-implementing-behavioral-malware-detection-based-on-Recurrent-neural-network"><span class="octicon octicon-link"></span></a>Collection of malware dynamic analysis data for implementing behavioral malware detection based on Recurrent neural network</h2><h3 id="Dynamic-executable-data" style=""><a class="anchor hidden-xs" href="#Dynamic-executable-data" title="Dynamic-executable-data"><span class="octicon octicon-link"></span></a>Dynamic executable data</h3><p>There are two approaches related to the detection of malicious applications: static and dynamic analysis. By static analysis, we mean exploring the capabilities of an application not executing it. <strong>Dynamic analysis</strong>, on the other hand, requires execution of an application to see, record and analyze its actions during runtime.</p><p>When executing an application it produces a lot of action. This action can be examined in several ways. We can directly access and analyze a code that is being run, but since this is a very hard task to analyze each instruction the goal can be simplified to record only API calls of an application. Also, it is possible to record such things as registry, file and network activity.</p><p>In this work we will focus on Windows malicious applications, to be precise, on ransomware. Most of Windows application use <strong>Win32API</strong> to perform actions using operation system, almost all of malicious apps use this API to perform network, disk, and other operations. This API calls solely can represent the general algorithm of investigated program, and through use of them can also be seen malicious activity - such as encrypting files, rewriting memory and performing undocumented system calls. Therefore we should use some solution that will be able to record this API calls, to help later train a neural network on these records from different samples of viruses.</p><p>It may be hard to teach RNN using API calls since it is categorical data and there should be many classes (as many as there are API calls exist). The second problem is that we may have a large input vector to make it possible for NN to understand the interrelation of data and behavior pattern of API calls. Also, it may be not enough to use the only API calls names since often the most important data gathered from arguments of those function, but the problem is - each function have different number of arguments with different data type and its amount, therefore it is very hard to make those data understandable to machine learning algorithm.</p><p>If not API calls it is also possible to collect side effects of running a program like a system CPU usage, user CPU use, packets sent, packets received, bytes sent, bytes received, memory use, swap use, the total number of processes currently running and the maximum process ID assigned.</p><p>We think that API calls it is more interesting and should be more resultative and effective of all executable dynamic data to train RNN. To record API calls we can use several tools, for example, one of them is <code>API Monitor</code>, but to teach any machine learning algorithm usually we need a lot of data. We can gather this data in high amounts and in an automatic way using a sandboxing tool like <strong>Cuckoo</strong>.</p><h3 id="Dynamic-analysis-in-open-source-solutions" style=""><a class="anchor hidden-xs" href="#Dynamic-analysis-in-open-source-solutions" title="Dynamic-analysis-in-open-source-solutions"><span class="octicon octicon-link"></span></a>Dynamic analysis in open-source solutions</h3><p>There are dozens of tools which are capable of dynamic analysis of executable files on Windows. The problem is that they often dedicated to some specific features like File and Registry operations (Sysinternal’s <code>Procmon</code>). In our case we do not need the really versatile application, we need the one that will gather API calls of process and is capable of generation of some kind of report. Also, the one thing that is interesting to us is that it should be open-source of with open algorithm of behavioral analysis. We need to research the implemented solution to later be able to implement something like this in our proof of concept.</p><p>We chose Cuckoo sandbox since it has <code>Behavioural analysis</code>, it is capable of generating the report after the executable is analyzed and have Python source code available on Github. We analyzed the algorithm of behavioral analysis implemented in Cuckoo and described it further.</p><p><img src="https://i.imgur.com/dUybYr9.png" alt=""><br>
<em>Image 1. Cuckoo behavioural analysis</em></p><p>General structural representation of behavioral analysis algorithm portrayed on <strong>Image 1</strong>. To gather API calls from target executable Cuckoo performs the following steps.</p><ol>
<li>There may be executables for different CPU architecture so Cucko first defines whether target application 32 or 64 bit. It does it using <code>is32bit.exe</code> application, which returns the bitsize of an application when it executed with the target application path as the argument.</li>
<li>After bitsize defined Cuckoo generates configuration. In this configuration, we have such parameters as:
<ul>
<li><code>Pipe</code> - ICP pipeline for commands;</li>
<li><code>Logpipe</code> - ICP pipeline for logs;</li>
<li><code>Analyzer</code> - current working directory;</li>
<li><code>First-process</code> - “1” if first process else “0”;</li>
<li><code>Startup-time</code> - time when execution started;</li>
<li><code>Disguise</code> - should monitor be runned using drivers to hide its presence;</li>
</ul>
</li>
<li>Now we Cuckoo executes injector with bitsize according to the bitsize of a target application. Also Cuckoo passes config created on the previous step as an argument to the injector. Besides config injector takes as an argument path to the monitor DLL of appropriate bitsize;</li>
<li>If the monitor was successfully injected to the target application it should start to list to the API calls and collect other information about executable.</li>
<li>To communicate with the analyzer, Monitor and Cuckoo use created before PIPEs;</li>
</ol><p>After analysis finished Cuckoo will parse collected data and generate a report in JSON format where will be located such information as static analysis, network communication of process, found signatures, behaviour analysis, etc. Using these reports it is possible to access the field with behavior data and extract all performed API calls from there. On <strong>image 2</strong> we can see an example of a report that contains behavior analysis data:<br>
<img src="https://i.imgur.com/UZQN3uO.png" alt=""><br>
<em>Image 2. Cuckoo report structure</em></p><p>If the target process was launched and one of its processes performed some actions it should use some API calls. These entries can be sees in <code>processes</code> entry of each separate process. The calls that were performed by process saved in the format shown on <strong>image 3</strong>, alongside with the names of API calls it collects its arguments, their values, execution status and time when it was performed:</p><img style="align: right;" src="https://i.imgur.com/X8aUlbE.png"><img style="align: left;" src="https://i.imgur.com/r3dyAXu.png"><p style="text-align: center"><i>Image 3. API calls in report</i></p><h3 id="Data-collection" style=""><a class="anchor hidden-xs" href="#Data-collection" title="Data-collection"><span class="octicon octicon-link"></span></a>Data collection</h3><h4 id="Malwares" style=""><a class="anchor hidden-xs" href="#Malwares" title="Malwares"><span class="octicon octicon-link"></span></a>Malwares</h4><p>We choose one type of malware to more efficiently train our RNN model to detect this type of malwere. Malware executables were downloaded from <a href="https://VirusShare.com" target="_blank" rel="noopener"><code>VirusShare</code></a>. They had a special compilation of Ransomware malware (38.152 samples):<br>
<img src="https://i.imgur.com/fu82i6i.png" alt=""></p><p>We downloaded this archive through torrent and chose 3000 examples from it in random order.</p><h4 id="Legitimate-files" style=""><a class="anchor hidden-xs" href="#Legitimate-files" title="Legitimate-files"><span class="octicon octicon-link"></span></a>Legitimate files</h4><p>Legitimate data could be parsed from one of the free software hostings. In the case of this project, we choose the hosting at <a href="http://www.snapfiles.com" target="_blank" rel="noopener">www.snapfiles.com</a>. We wrote a script <code>downloader.py</code> that tries to download all software from defined categories and unpack it if it’s zip-compressed. Also, we tried to minimize the number of setup executables, so we filtered some of them from downloading.</p><p>In case of <code>Cuckoo</code>, we only need executables (no additional files), so we copied all executable files into one folder by using another script <code>filter.py</code>. (<em>Both scripts you can find in the <strong>appendix</strong>.</em>)</p><h4 id="Cuckoo-analysis" style=""><a class="anchor hidden-xs" href="#Cuckoo-analysis" title="Cuckoo-analysis"><span class="octicon octicon-link"></span></a>Cuckoo analysis</h4><p>We had <strong>3000</strong> malicious and <strong>2000</strong> usual applications. We used <code>VirtualBox</code> for Cuckoo analysis. To make the analysis faster we created 10 Virtual Machines, by Linked Clone creating. After all needed configurations we got working Cuckoo instance:<br>
<img src="https://i.imgur.com/DOVxenU.png" alt=""></p><p>The only way to submit files was API because CLI crashed too often and Web Interface could not upload more than 30 files in one time. Thus <code>submitter_pro.py</code> was created. After several unsuccessful attempts, we modified it: added delay between submitting, added file sorting and added a counter for the possibility to continue analysis from point of crash. To improve performance we separated phases of analysis and reporting.<br>
We did an analysis of all the examples. Then we created 10 processes of Cuckoo application for making reports. We gathered all the reports and by Cuckoo.<br>
To obtain data that we need we wrote <code>reporter.py</code> script. <em>(All scripts are in <strong>appendix</strong>.)</em><br>
<img src="https://i.imgur.com/nMF6LMP.png" alt=""></p><p>We had a lot of problems with Cuckoo analysis and reporting. For example here is the error when <code>Cuckoo</code> stuck at making Static analysis, though we need only Behavioural (Dynamic):<br>
<img src="https://i.imgur.com/ZJ834WN.png" alt=""></p><p>Therefore we first only analyzed malware and after did reports only on dynamic analysis data. Because of errors and other problems with <code>Cuckoo</code> we got <strong>2196 legal files</strong> reports and <strong>2884 for malicious files</strong>. Here is the example of <code>Cuckoo</code> output when it finished doing the report for analysis:<br>
<img src="https://i.imgur.com/Gc6eK5d.png" alt=""></p><p>Some files in the behavioral analysis contain API calls for several processes and we can see process tree and their calls here:<br>
<img src="https://i.imgur.com/srFz9HJ.png" alt=""></p><p>When viewing separate process we see all important API calls with their arguments, statuses and return values:<br>
<img src="https://i.imgur.com/7sBPQDZ.png" alt=""></p><p><em>In conclusion, we must highlight, that Cuckoo is a very painful tool to work with a huge number of files.</em></p><h3 id="Preparations-of-collected-data" style=""><a class="anchor hidden-xs" href="#Preparations-of-collected-data" title="Preparations-of-collected-data"><span class="octicon octicon-link"></span></a>Preparations of collected data</h3><p>After we gathered reports from all the malicious and legitimate files that we sent for Cuckoo analysis we should write some script to analyze, sort and prepare data from these reports. To achieve this task we wrote <code>parse_log.py</code> script (can be found in the <a href="https://github.com/karust/rnn_malware" target="_blank" rel="noopener"><strong>repository</strong></a> of this project).</p><p>First of all, we sort malicious and legitimate reports to different folders using <code>reports/sort.py</code> script. Then we should inspect each report and see if it is valid. Some of the reports did not have any API calls in any of the processes, therefore we wrote <code>sort</code> function (<code>parse_log.py</code>). This function inspects each report and if no processes have any API calls it moves this report to <code>broken</code> folder.</p><p>The next problem is that there were too big reports (more than 100 Mb) that slow down our work and work of our scripts, we just remove them because they are few:</p><ul>
<li>
<p>13 legal files reports were bigger than 100 Mb (10.5 Gb, when 1469 normal reports weight 6.74 Gb):<br>
<img src="https://i.imgur.com/W7F9Lac.png" alt=""></p>
</li>
<li>
<p>132 malicious files reports were bigger than 100 Mb (32.1 Gb, when 2527 normal reports weight 16.1 Gb)<br>
<img src="https://i.imgur.com/sc4Xxpy.png" alt=""></p>
</li>
</ul><p>Now we can use <code>dataStats</code> function from <code>parse_log.py</code> to see how many valid reports we have:<br>
<img src="https://i.imgur.com/SS7zLpU.png" alt=""><br>
In total, we have <strong>3996</strong> valid reports, from which 1469 are for legitimate files. It is not a good ratio - in a good way we should have 50% of reports for each class in the binary classification task.</p><p>The next interesting thing is that executables often start other processes and they also have API calls. Using <code>countProcesses</code> function from <code>parse_log.py</code> we counted overall number of processes in reports:<br>
<img src="https://i.imgur.com/DwI4cOC.png" alt=""><br>
Mainly executables had 2 processes, but sometimes they started more than 10 processes. The malicious files had this behavior more when legitimate files had mostly 2-4 processes. Almost all of the malicious executables that created many processes had similar behavior related to spawning processes. They executed <code>backup.exe</code> process in different locations like <code>C:</code>, <code>C:\Program Files\</code>, etc. Probably that is some file encryption executable of ransomware.</p><img style="align: right;" src="https://i.imgur.com/yvVkG7y.png"><img style="align: left;" src="https://i.imgur.com/gd02eqc.png"><p style="text-align: center"><i>Image ?. Clone process</i></p><p>After we collected only valid reports it is time to parse API calls and generate the dataset. To accomplish this task we wrote <code>collectDataset</code> function in <code>parse_log.py</code>. It takes the directory with malicious and legal files reports and parses each one, where it pulls API calls of each created process and saving them in one row in CSV file marking the sequence of these calls as malicious or not. For the first time, we also collected <code>status</code> and <code>return</code> values of API functions, because they may have been used to build a model of RNN, but while retaining them the dataset file is quite large:<br>
<img src="https://i.imgur.com/hvQ54Q6.png" alt=""></p><p>Looking at the values that they have (they are not very informative) we decided to remove them and try to teach RNN only on API calls names:<br>
<img src="https://i.imgur.com/lY23Qv3.png" alt=""></p><p>Some of the processes had an extensive number of API calls, where we need only a limited number of them to fit as input to RNN. Therefore we use <code>limitNumAPI</code> argument of <code>collectDataset</code> function to contain only a restricted number of calls from the start of program execution. We collected dataset with 150 API calls. It significantly reduced the size of our dataset from ~1.6 Gb to ~400 Mb:<br>
<img src="https://i.imgur.com/BemCT3l.png" alt=""></p><p>The next problem that we encountered is that there were similar entries in the dataset (the same sequence of API calls), it is not good since it is better to have a diverse dataset. Therefore we wrote <code>hashSortAPI</code> function in <code>parse_log.py</code> to hash each sequence of API calls and remain only unique. This approach helped us to reduce the size of dataset even more and make it more efficient. The size reduced from ~400 Mb to 7.13 Mb:<br>
<img src="https://i.imgur.com/3AgitRO.png" alt=""></p><p>Using the same technique we collected datasets with a different number of API calls. The interesting thing to mention here is that <strong>the longer the sequence of API calls the more entries in the dataset it will have</strong>:</p><ul>
<li>
<p>50 API calls:<br>
<img src="https://i.imgur.com/86fd3lk.png" alt=""><br>
<em>Legitimate samples:  <strong>587</strong>, Malicious samples:  <strong>1533</strong></em></p>
</li>
<li>
<p>100 API calls:<br>
<img src="https://i.imgur.com/p554A3p.png" alt=""><br>
<em>Legitimate samples:  <strong>797</strong>, Malicious samples:  <strong>1790</strong></em></p>
</li>
<li>
<p>150 API calls:<br>
<img src="https://i.imgur.com/cOdHTmC.png" alt=""><br>
<em>Legitimate samples:  <strong>979</strong>, Malicious samples:  <strong>2178</strong></em></p>
</li>
<li>
<p>200 API calls:<br>
<img src="https://i.imgur.com/vv9lsC4.png" alt=""><br>
<em>Legitimate samples:  <strong>1111</strong>, Malicious samples:  <strong>2490</strong></em></p>
</li>
<li>
<p>250 API calls:<br>
<img src="https://i.imgur.com/PFwOrUz.png" alt=""><br>
<em>Legitimate samples:  <strong>1194</strong>, Malicious samples:  <strong>2686</strong></em></p>
</li>
<li>
<p>300 API calls:<br>
<img src="https://i.imgur.com/iv5Ij0K.png" alt=""><br>
<em>Legitimate samples:  <strong>1273</strong>, Malicious samples:  <strong>3002</strong></em></p>
</li>
</ul><h3 id="Training-RNN" style=""><a class="anchor hidden-xs" href="#Training-RNN" title="Training-RNN"><span class="octicon octicon-link"></span></a>Training RNN</h3><p>For our first model, we chose dataset with the sequence of 150 API calls. To train any machine learning algorithm we, first must convert data to understandable for algorithm format. In our case we had CSV file with rows that had a sequence of API calls separated with <code>space</code> and their class (0 for legitimate file and 1 for malware):<br>
<img src="https://i.imgur.com/hfwjTf6.png" alt=""></p><p>Then we use <code>Tokenizer</code> mechanism to bind a number for each API call name, so the neural network will deal with numbers as it should do. Here we have the dictionary of 228 different APIs (all the APIs that we had in our dataset) and the number assigned to them:<br>
<img src="https://i.imgur.com/MOqvRgh.png" alt=""></p><p>After encoding with tokens our dataset look like following way - each row has a sequence of API calls but each API call has its own column and defined with a token (number):<br>
<img src="https://i.imgur.com/rBSfA1K.png" alt=""></p><p>Also, we separate the data on the input and the labels. The labels are the ideal result on which algorithm will have to aim while learning and on which it will be verified. We already separated data to input on the previous step (<strong>X</strong> NumPy matrix) and now we detach labels from the dataset and create <strong>Y</strong> array with labels:<br>
<img src="https://i.imgur.com/UDHImyw.png" alt=""></p><p>Since all neural networks have a tendency to show good results while learning and perform badly on the data that they had not seen - we must separate our data to training and test sets. This way we will verify our model on the test set and will have a more accurate representation of how it performs:<br>
<img src="https://i.imgur.com/BaAQlJq.png" alt=""></p><p><em>It is worthy to mention that we chose RNN because of it is known for the probability to work with sequence data due to the LSTM architecture. It performs well in Speech recognition and in text analysis. Our task is similar to those, therefore, we use a recurrent neural network.</em></p><p>There is no accurate way of how a number of layers and neurons in them should be chosen, so we using the <code>rule of thumb</code> create RNN with at least 1 layer, that has neurons more or equals to the input vector. Also after each <code>Dense</code> layer, we use <code>Dropout</code> layer which will not include inputs to next Dense layer with some random probability (in our case it is 30%, so 30% of random inputs will not be used while training step). Dropout layer helps the model to not overlearn on the training data and use a different path to make the result prediction. The first our model had the following architecture (150 neurons on each LSTM layer):<br>
<img src="https://i.imgur.com/VuA3szw.png" alt=""></p><p>The network that we trained has 150 inputs and the data that we have also have 150 API calls in each row. But an application does not start from 150 API calls, therefore we from 1 row of a sequence of 150 API calls we create a matrix with the simulation of time using <code>Window-Sliding</code> technique. Using this technique we will have, for example, 1 API call in 0 row and other inputs filled with zeroes, that mean that there are no API calls:<br>
<img src="https://i.imgur.com/OMXZI9x.png" alt=""></p><p>The interesting thing that we have to mention is that our model performs badly when it has many zeroes on its input since it is trained only on full API sequences and do not know what is exactly 0es and predict those sequences as malware. To solve this problem we tried to add column filled with 0es to all rows so the RNN will get familiar with 0es:<br>
<img src="https://i.imgur.com/LxcmHG7.png" alt=""></p><p>The previous method did not help to solve the problem. So we used the rows with legitimate sequences of API calls to fill the data to 50/50 level (50% malware - 50% legitimate, because we had less legitimate sequences than malware). The new data using which dataset was filled has been randomly cropped and filled with 0es:<br>
<img src="https://i.imgur.com/oUoOkls.png" alt=""></p><p>Now, the other model that we trained behave adequately and show the behavior that we expected. After it sees some strange API calls it raises the probability that an executable file is malicious:<br>
<img src="https://i.imgur.com/Hp59rVb.png" alt=""></p><p>Here we have the <code>error slope</code> for each model that we trained. On these models we can see how many API calls on input RNN need to be sure that the API sequence is malicious or normal:</p><ul>
<li>
<p>50 API calls<br>
<img src="https://i.imgur.com/xopfPeY.png" alt=""></p>
</li>
<li>
<p>100 API calls<br>
<img src="https://i.imgur.com/bMfghzX.png" alt=""></p>
</li>
<li>
<p>200 API calls<br>
<img src="https://i.imgur.com/VAtWPxu.png" alt=""></p>
</li>
</ul><p>As can be seen from the plots above they all decrease the error rate when they almost have all API’s in their input. For example, a model that was trained on 50 API calls predicts more accurate when it has 40 API calls, but the model that was trained on 100 API’s predict with accurately only after ~90 API’s. Therefore the question is - why the model with 100 API’s cannot predict with high accuracy on 40’s step like it did model with 50 API’s?</p><p>In conclusion, we have a table with the accuracy results, false and true positives, which were calculated through the confussion matrix:</p><table>
<thead>
<tr>
<th>APIs</th>
<th>LSTM Layers</th>
<th>Accuracy</th>
<th>FP</th>
<th>FN</th>
<th>Epochs</th>
<th>Leg/Mal samples</th>
</tr>
</thead>
<tbody>
<tr>
<td>50</td>
<td>150/150/150</td>
<td><strong>89.1%</strong></td>
<td>4.7%</td>
<td>6.2%</td>
<td>500</td>
<td>587/1533</td>
</tr>
<tr>
<td>100</td>
<td>300/300/300</td>
<td>88.1%</td>
<td>6.1%</td>
<td>5.8%</td>
<td>600</td>
<td>797/1790</td>
</tr>
<tr>
<td>150</td>
<td>150/150/150</td>
<td>49%</td>
<td>34.7%</td>
<td>16.2%</td>
<td>400</td>
<td>979/2178</td>
</tr>
<tr>
<td>200</td>
<td>250/250/250</td>
<td>88.2%</td>
<td>6.6%</td>
<td>5.2%</td>
<td>500</td>
<td>1111/2490</td>
</tr>
<tr>
<td>250</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>1194/2686</td>
</tr>
<tr>
<td>300</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>1273/3002</td>
</tr>
</tbody>
</table><p>The most accurate model was the model of 50 API’s, but it does not mean that it is the best - it’s just trained on the least number of samples (the data less unique, homogenous). Therefore the best result that we had during our training is ~88%.</p><h3 id="Proof-of-concept-application" style=""><a class="anchor hidden-xs" href="#Proof-of-concept-application" title="Proof-of-concept-application"><span class="octicon octicon-link"></span></a>Proof of concept application</h3><p>As a proof of concept, we wanted to make an application similar to cuckoo analyzer but based on RNN prediction with the possibility of process killing if RNN decides that it’s a malware.</p><p>This application performs the analysis only for Windows executables because RNN was trained on it. We took some parts of code from Cuckoo repository, especially <a href="https://github.com/cuckoosandbox/cuckoo/tree/master/cuckoo/data/analyzer/windows" target="_blank" rel="noopener">analyzer</a>.</p><p>For some reasons, pipe creation during monitor injection only works on Python 2.7. But RNN works only on Python 3.7 because of TensorFlow. To solve this problem RNN was launched on Python 3.7 and made predictions through a TCP connection.</p><p>Analyzer itself was launched at Python 2.7, it injected monitor into target executable, opened a pipe and read for logs. The only interesting part for us in this logs is API calls. After each API call, analyzer suspends target process and feed sequence of API calls from the beginning into RNN. If RNN response greater than some threshold targeted process will be killed and all logs will be saved.</p><p><img src="https://i.imgur.com/EbSJHnT.png" alt=""></p><p>You can find this application at this <a href="https://github.com/karust/rnn_malware/tree/master/reverse" target="_blank" rel="noopener">repository folder</a>. Also, you can watch the demo video <a href="https://drive.google.com/open?id=1DrSJ3MxwsPq0Y1hUygPk3z7Htm0foPbP" target="_blank" rel="noopener">here</a>.</p><h2 id="Conclusion-and-future-work" style=""><a class="anchor hidden-xs" href="#Conclusion-and-future-work" title="Conclusion-and-future-work"><span class="octicon octicon-link"></span></a>Conclusion and future work</h2><p>In the conclusion, we must say that RNN can be used during dynamic (behavioral) analysis of executables, but its performance is not perfect as should be (if we want to implement such approach in antivirus solutions). If there is demand to get rid of the many malware analysts or use some alternative to current malware detection solution this method can be used, for example, alongside with other machine learning model (for static analysis, for dynamic analysis of side-effects) and in this way we think that will be acquired the highest rate of accuracy.</p><p>For further work we can:</p><ul>
<li>Sanitize our dataset - delete viruses from legal files and make dataset bigger and more perfect;</li>
<li>Investigate the dependency of error upon the number of API calls;</li>
<li>Analyze which API functions trigger the RNN the most;</li>
<li>Expand dataset with API calls that were made after the first 50, 100, 150, etc.</li>
</ul><h2 id="References" style=""><a class="anchor hidden-xs" href="#References" title="References"><span class="octicon octicon-link"></span></a>References</h2><ol>
<li><a href="https://www.covert.io/research-papers/deep-learning-security/Malware%20Detection%20with%20Deep%20Neural%20Network%20using%20Process%20Behavior.pdf" target="_blank" rel="noopener">https://www.covert.io/research-papers/deep-learning-security/Malware Detection with Deep Neural Network using Process Behavior.pdf</a></li>
<li><a href="https://www.sciencedirect.com/science/article/pii/S0167404818305546" target="_blank" rel="noopener">https://www.sciencedirect.com/science/article/pii/S0167404818305546</a></li>
<li><a href="https://www.skoltech.ru/app/data/uploads/sites/2/2016/05/Skoltex_presentation_2016.pdf" target="_blank" rel="noopener">https://www.skoltech.ru/app/data/uploads/sites/2/2016/05/Skoltex_presentation_2016.pdf</a></li>
<li><a href="https://patents.google.com/patent/US9495633B2/en" target="_blank" rel="noopener">https://patents.google.com/patent/US9495633B2/en</a></li>
<li><a href="https://arxiv.org/pdf/1811.07842.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1811.07842.pdf</a></li>
<li><a href="https://link.springer.com/chapter/10.1007/978-981-13-6621-5_8" target="_blank" rel="noopener">https://link.springer.com/chapter/10.1007/978-981-13-6621-5_8</a></li>
<li><strong>Repository</strong> with the code used in this project: <a href="https://github.com/karust/rnn_malware" target="_blank" rel="noopener">https://github.com/karust/rnn_malware</a></li>
</ol><h2 id="Appendix" style=""><a class="anchor hidden-xs" href="#Appendix" title="Appendix"><span class="octicon octicon-link"></span></a>Appendix</h2><h3 id="downloaderpy" style=""><a class="anchor hidden-xs" href="#downloaderpy" title="downloaderpy"><span class="octicon octicon-link"></span></a><code>downloader.py</code></h3><pre><code class="python hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span>
<span data-linenumber="24"></span>
<span data-linenumber="25"></span>
<span data-linenumber="26"></span>
<span data-linenumber="27"></span>
<span data-linenumber="28"></span>
<span data-linenumber="29"></span>
<span data-linenumber="30"></span>
<span data-linenumber="31"></span>
<span data-linenumber="32"></span>
<span data-linenumber="33"></span>
<span data-linenumber="34"></span>
<span data-linenumber="35"></span>
<span data-linenumber="36"></span>
<span data-linenumber="37"></span>
<span data-linenumber="38"></span>
<span data-linenumber="39"></span>
<span data-linenumber="40"></span>
<span data-linenumber="41"></span>
<span data-linenumber="42"></span>
<span data-linenumber="43"></span>
<span data-linenumber="44"></span>
<span data-linenumber="45"></span>
<span data-linenumber="46"></span>
<span data-linenumber="47"></span>
<span data-linenumber="48"></span>
<span data-linenumber="49"></span>
<span data-linenumber="50"></span>
<span data-linenumber="51"></span>
<span data-linenumber="52"></span>
<span data-linenumber="53"></span>
<span data-linenumber="54"></span>
<span data-linenumber="55"></span>
<span data-linenumber="56"></span>
<span data-linenumber="57"></span>
<span data-linenumber="58"></span>
<span data-linenumber="59"></span>
<span data-linenumber="60"></span>
<span data-linenumber="61"></span>
<span data-linenumber="62"></span>
<span data-linenumber="63"></span>
<span data-linenumber="64"></span>
<span data-linenumber="65"></span>
<span data-linenumber="66"></span>
<span data-linenumber="67"></span>
<span data-linenumber="68"></span>
<span data-linenumber="69"></span>
<span data-linenumber="70"></span>
<span data-linenumber="71"></span>
<span data-linenumber="72"></span>
<span data-linenumber="73"></span>
<span data-linenumber="74"></span>
<span data-linenumber="75"></span>
<span data-linenumber="76"></span>
<span data-linenumber="77"></span>
<span data-linenumber="78"></span>
<span data-linenumber="79"></span>
<span data-linenumber="80"></span>
<span data-linenumber="81"></span>
<span data-linenumber="82"></span>
<span data-linenumber="83"></span>
<span data-linenumber="84"></span>
<span data-linenumber="85"></span>
<span data-linenumber="86"></span>
<span data-linenumber="87"></span>
<span data-linenumber="88"></span>
<span data-linenumber="89"></span>
<span data-linenumber="90"></span></div><div class="code"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> zipfile <span class="hljs-keyword">import</span> ZipFile
<span class="hljs-keyword">import</span> shutil

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_link_from_href</span><span class="hljs-params">(line)</span>:</span>
    href_pos=line.find(<span class="hljs-string">"href"</span>)
    start = line.find(<span class="hljs-string">'"'</span>,href_pos)
    end = line.find(<span class="hljs-string">'"'</span>,start+<span class="hljs-number">1</span>)
    <span class="hljs-keyword">return</span> line[start+<span class="hljs-number">1</span>:end]

counter = <span class="hljs-number">0</span>

pages = [<span class="hljs-string">'http://www.snapfiles.com/software/security/access.html'</span>,
         <span class="hljs-string">'http://www.snapfiles.com/software/security/passwordrecovery.html'</span>,
         ...
        ]

<span class="hljs-keyword">for</span> page <span class="hljs-keyword">in</span> pages:
    splits = page.split(<span class="hljs-string">'/'</span>)
    page_name = splits[<span class="hljs-number">-2</span>]+<span class="hljs-string">"_"</span>+splits[<span class="hljs-number">-1</span>]
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(page_name): os.mkdir(page_name)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(page_name+<span class="hljs-string">'\\Exes'</span>): os.mkdir(page_name+<span class="hljs-string">"\\Exes"</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(page_name+<span class="hljs-string">'\\Zip'</span>): os.mkdir(page_name+<span class="hljs-string">"\\Zip"</span>)

    base_html = requests.get(page)
    downloads=[]

    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> base_html.text.split(<span class="hljs-string">'\n'</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-string">'list-dlbutton'</span> <span class="hljs-keyword">in</span> line:
            downloads += [get_link_from_href(line)]
    print(<span class="hljs-string">"Links to download: "</span>+ str(len(downloads)))

    <span class="hljs-keyword">for</span> link <span class="hljs-keyword">in</span> downloads:
        response = <span class="hljs-number">0</span>
        <span class="hljs-keyword">while</span> response!=<span class="hljs-number">200</span>:
            <span class="hljs-keyword">try</span>:
                download_page = requests.get(link)
                response = download_page.status_code
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                print(<span class="hljs-string">"\tPage download exception :("</span>)
        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> download_page.text.split(<span class="hljs-string">'\n'</span>):
            <span class="hljs-keyword">if</span> <span class="hljs-string">'main-dlink'</span> <span class="hljs-keyword">in</span> line:
                link = get_link_from_href(line)
                <span class="hljs-comment"># Fix for bluestack cause it's big</span>
                <span class="hljs-keyword">if</span> <span class="hljs-string">'bluestack'</span> <span class="hljs-keyword">in</span> link:
                    <span class="hljs-keyword">break</span>
                counter+=<span class="hljs-number">1</span>
                print(str(counter)+<span class="hljs-string">". "</span>+link)
                
                foldername = link.split(<span class="hljs-string">'/'</span>)[<span class="hljs-number">-1</span>][:<span class="hljs-number">-4</span>].replace(<span class="hljs-string">"?"</span>,<span class="hljs-string">''</span>).replace(<span class="hljs-string">"="</span>,<span class="hljs-string">""</span>)

                ban_words = [<span class="hljs-string">'x64'</span>,<span class="hljs-string">'X64'</span>,<span class="hljs-string">'Setup'</span>,<span class="hljs-string">'SETUP'</span>,<span class="hljs-string">'setup'</span>,<span class="hljs-string">'Install'</span>,<span class="hljs-string">'install'</span>,<span class="hljs-string">'INSTALL'</span>]    
                ban = <span class="hljs-keyword">False</span>
                <span class="hljs-keyword">for</span> ban_word <span class="hljs-keyword">in</span> ban_words:
                    <span class="hljs-keyword">if</span> ban_word <span class="hljs-keyword">in</span> link:
                        ban = <span class="hljs-keyword">True</span>
                        <span class="hljs-keyword">break</span>
                <span class="hljs-keyword">if</span> ban: <span class="hljs-keyword">break</span>

                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(page_name+<span class="hljs-string">'\\Exes\\'</span>+foldername): 
                    os.mkdir(page_name+<span class="hljs-string">'\\Exes\\'</span>+foldername)
                <span class="hljs-keyword">try</span>:        
                    btfile = requests.get(link, headers={<span class="hljs-string">'User-Agent'</span>:<span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.131 Safari/537.36'</span>}, allow_redirects=<span class="hljs-keyword">True</span>)
                <span class="hljs-keyword">except</span>:
                    print(<span class="hljs-string">"\tFile download exception"</span>)
                    <span class="hljs-keyword">break</span>
                ext = link[<span class="hljs-number">-4</span>:]
                <span class="hljs-keyword">if</span> link[<span class="hljs-number">-4</span>:] == <span class="hljs-string">".zip"</span>:
                    <span class="hljs-keyword">try</span>:
                        rawfile = open(page_name+<span class="hljs-string">'\\Zip\\'</span>+foldername+<span class="hljs-string">".zip"</span>, <span class="hljs-string">'wb'</span>)
                        rawfile.write(btfile.content)
                        rawfile.close()
                        <span class="hljs-keyword">with</span> ZipFile(page_name+<span class="hljs-string">'\\Zip\\'</span>+foldername+<span class="hljs-string">".zip"</span>, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> zipFile:
                            zipFile.extractall(path=page_name+<span class="hljs-string">'\\Exes\\'</span>+foldername, members=<span class="hljs-keyword">None</span>, pwd=<span class="hljs-keyword">None</span>)
                    <span class="hljs-keyword">except</span>:
                        print(<span class="hljs-string">"\tZip extraction error"</span>)
                        shutil.rmtree(page_name+<span class="hljs-string">'\\Exes\\'</span>+foldername)
                        <span class="hljs-keyword">break</span>
                <span class="hljs-keyword">elif</span> link[<span class="hljs-number">-4</span>:] == <span class="hljs-string">".exe"</span>:
                    rawfile = open(page_name+<span class="hljs-string">'\\Exes\\'</span>+foldername+<span class="hljs-string">"\\"</span>+foldername+<span class="hljs-string">".exe"</span>, <span class="hljs-string">'wb'</span>)
                    rawfile.write(btfile.content)
                    rawfile.close()
                <span class="hljs-keyword">else</span>: 
                    print(<span class="hljs-string">"\tUnknown format"</span>)
                    <span class="hljs-keyword">break</span>
                print(<span class="hljs-string">"\tDownloaded"</span>)
                <span class="hljs-keyword">break</span>
    shutil.rmtree(page_name+<span class="hljs-string">'\\Zip'</span>)
</div></div></code></pre><h3 id="filterpy" style=""><a class="anchor hidden-xs" href="#filterpy" title="filterpy"><span class="octicon octicon-link"></span></a><code>filter.py</code></h3><pre><code class="python hljs"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> zipfile <span class="hljs-keyword">import</span> ZipFile
<span class="hljs-keyword">import</span> shutil
<span class="hljs-keyword">from</span> scipy.stats <span class="hljs-keyword">import</span> entropy

<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(<span class="hljs-string">'Exes'</span>): os.mkdir(<span class="hljs-string">"Exes"</span>)

exec_count = <span class="hljs-number">0</span>
banned = <span class="hljs-number">0</span>

<span class="hljs-keyword">for</span> base_dir <span class="hljs-keyword">in</span> os.listdir():
    <span class="hljs-keyword">if</span> base_dir==<span class="hljs-string">'Exes'</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> os.path.isdir(base_dir):
        <span class="hljs-keyword">continue</span>
    <span class="hljs-keyword">for</span> root, dirs, files <span class="hljs-keyword">in</span> os.walk(base_dir):
        <span class="hljs-keyword">for</span> fl <span class="hljs-keyword">in</span> files:
            <span class="hljs-keyword">if</span> fl[<span class="hljs-number">-4</span>:] == <span class="hljs-string">'.exe'</span>:
                path = root+<span class="hljs-string">"\\"</span>+fl
                ban_words = [<span class="hljs-string">'x64'</span>,<span class="hljs-string">'X64'</span>,<span class="hljs-string">'Setup'</span>,<span class="hljs-string">'SETUP'</span>,<span class="hljs-string">'setup'</span>,<span class="hljs-string">'Install'</span>,<span class="hljs-string">'install'</span>,<span class="hljs-string">'INSTALL'</span>]    
                ban = <span class="hljs-keyword">False</span>
                <span class="hljs-keyword">for</span> ban_word <span class="hljs-keyword">in</span> ban_words:
                    <span class="hljs-keyword">if</span> ban_word <span class="hljs-keyword">in</span> fl:
                        ban = <span class="hljs-keyword">True</span>
                        <span class="hljs-keyword">break</span>
                <span class="hljs-keyword">if</span> ban: <span class="hljs-keyword">continue</span>
                <span class="hljs-comment">#if ban: banned+=1</span>

                shutil.copy(path,<span class="hljs-string">'Exes\\'</span>+fl)

                <span class="hljs-comment">#with open(path,"rb") as f:</span>
                <span class="hljs-comment">#    data = f.read()</span>
                <span class="hljs-comment">#    print(entropy(data))</span>
                <span class="hljs-comment">#    f.close()</span>
                exec_count+=<span class="hljs-number">1</span>
                print(path)
            
print(exec_count, banned)
input()
</code></pre><h3 id="reporterpy" style=""><a class="anchor hidden-xs" href="#reporterpy" title="reporterpy"><span class="octicon octicon-link"></span></a><code>reporter.py</code></h3><pre><code class="python hljs"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> json


REPORTS_DIRECTORY = <span class="hljs-string">"/home/cuckoo/.cuckoo/storage/analyses"</span>
FILE_NAME = <span class="hljs-string">"report.json"</span>
OUT_DIRECTORY = <span class="hljs-string">"./out"</span>

report_list = []
counter = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> dirName, dirs, files <span class="hljs-keyword">in</span> os.walk(REPORTS_DIRECTORY):
    <span class="hljs-keyword">if</span> dirName.split(<span class="hljs-string">"/"</span>)[<span class="hljs-number">-1</span>] == <span class="hljs-string">"reports"</span>:
        <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> files:
            <span class="hljs-keyword">if</span> file == FILE_NAME:
              counter += <span class="hljs-number">1</span>
              <span class="hljs-keyword">if</span> counter == <span class="hljs-number">100</span>:
                print(<span class="hljs-string">"100 done"</span>)
                counter = <span class="hljs-number">0</span>
              report_list.append(os.path.join(dirName, file))

<span class="hljs-keyword">for</span> i, report <span class="hljs-keyword">in</span> enumerate(report_list):
    <span class="hljs-keyword">with</span> open(report, <span class="hljs-string">"r"</span>) <span class="hljs-keyword">as</span> report_file:
        report_content = report_file.read()
        <span class="hljs-keyword">try</span>:
            report_json = json.loads(report_content)
            file_name = report_json[<span class="hljs-string">"target"</span>][<span class="hljs-string">"file"</span>][<span class="hljs-string">"name"</span>] +  <span class="hljs-string">"_"</span> + str(i) + <span class="hljs-string">".json"</span>
            <span class="hljs-keyword">with</span> open(os.path.join(OUT_DIRECTORY, file_name), <span class="hljs-string">"w+"</span>) <span class="hljs-keyword">as</span> new_report:
                new_report.write(report_content)
            print(<span class="hljs-string">"Saving "</span> + file_name)
        <span class="hljs-keyword">except</span> json.JSONDecodeError <span class="hljs-keyword">as</span> e:
            print(<span class="hljs-string">"Some khouyinia happened"</span>)
</code></pre><h3 id="submitter_propy" style=""><a class="anchor hidden-xs" href="#submitter_propy" title="submitter_propy"><span class="octicon octicon-link"></span></a><code>submitter_pro.py</code></h3><pre><code class="python hljs"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> sys

REST_URL = <span class="hljs-string">"http://10.1.1.161:1337/tasks/create/file"</span>
HEADERS = {<span class="hljs-string">"Authorization"</span>: <span class="hljs-string">"Bearer S4MPL3"</span>}
SAMPLES_DIR = <span class="hljs-string">"/home/ez/Music/Exes/"</span>
<span class="hljs-comment"># LAST_SAMPLE = "mal_leg_VirusShare_4f227c03fc68ef44dfafb43ec176db24"</span>
LAST_SAMPLE = <span class="hljs-string">"mal_leg_VirusShare_4f1abbb90b301e5ae086880d65734842"</span>
sample_list = []
last_sample_path = <span class="hljs-string">""</span>

<span class="hljs-keyword">for</span> root, dirs, files <span class="hljs-keyword">in</span> os.walk(SAMPLES_DIR, topdown=<span class="hljs-keyword">False</span>):
   <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> files:
      path =  os.path.join(root, name)
      sample_list.append(path)
      <span class="hljs-keyword">if</span> name == LAST_SAMPLE:
         last_sample_path = path

sample_list = sorted(sample_list)

<span class="hljs-keyword">if</span> LAST_SAMPLE != <span class="hljs-string">""</span>:
  <span class="hljs-keyword">if</span> last_sample_path != <span class="hljs-string">""</span>:
    last_index = sample_list.index(last_sample_path)
    <span class="hljs-keyword">if</span> last_index:
       print(<span class="hljs-string">"Found file, starting from index "</span> + str(last_index))
       sample_list = sample_list[last_index:]
    <span class="hljs-keyword">else</span>:
      print(<span class="hljs-string">"Did not find the file in the list, exiting"</span>)
      sys.exit(<span class="hljs-number">1</span>)

<span class="hljs-keyword">for</span> sample_name <span class="hljs-keyword">in</span> sample_list:
    <span class="hljs-keyword">with</span> open(sample_name, <span class="hljs-string">"rb"</span>) <span class="hljs-keyword">as</span> sample:
        files = {<span class="hljs-string">"file"</span>: (sample_name.split(<span class="hljs-string">"/"</span>)[<span class="hljs-number">-1</span>], sample)}
        r = requests.post(REST_URL, headers=HEADERS, files=files)
    task_id = r.json()[<span class="hljs-string">"task_id"</span>]
    time.sleep(<span class="hljs-number">10</span>)

</code></pre></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li class=""><a href="#CCF-Project-Collection-of-malware-dynamic-analysis-data-for-implementing-behavioral-malware-detection-based-on-Recurrent-neural-network" title="CCF Project: Collection of malware dynamic analysis data for implementing behavioral malware detection based on Recurrent neural network">CCF Project: Collection of malware dynamic analysis data for implementing behavioral malware detection based on Recurrent neural network</a></li>
<li class=""><a href="#Abstract" title="Abstract">Abstract</a></li>
<li class=""><a href="#Introduction" title="Introduction">Introduction</a></li>
<li class=""><a href="#Novelty" title="Novelty">Novelty</a></li>
<li class=""><a href="#Related-work" title="Related work">Related work</a></li>
<li class=""><a href="#Project-goals" title="Project goals">Project goals</a></li>
<li class=""><a href="#Collection-of-malware-dynamic-analysis-data-for-implementing-behavioral-malware-detection-based-on-Recurrent-neural-network" title="Collection of malware dynamic analysis data for implementing behavioral malware detection based on Recurrent neural network">Collection of malware dynamic analysis data for implementing behavioral malware detection based on Recurrent neural network</a><ul class="nav">
<li class=""><a href="#Dynamic-executable-data" title="Dynamic executable data">Dynamic executable data</a></li>
<li class=""><a href="#Dynamic-analysis-in-open-source-solutions" title="Dynamic analysis in open-source solutions">Dynamic analysis in open-source solutions</a></li>
<li><a href="#Data-collection" title="Data collection">Data collection</a><ul class="nav">
<li><a href="#Malwares" title="Malwares">Malwares</a></li>
<li><a href="#Legitimate-files" title="Legitimate files">Legitimate files</a></li>
<li><a href="#Cuckoo-analysis" title="Cuckoo analysis">Cuckoo analysis</a></li>
</ul>
</li>
<li><a href="#Preparations-of-collected-data" title="Preparations of collected data">Preparations of collected data</a></li>
<li><a href="#Training-RNN" title="Training RNN">Training RNN</a></li>
<li class=""><a href="#Proof-of-concept-application" title="Proof of concept application">Proof of concept application</a></li>
</ul>
</li>
<li><a href="#Conclusion-and-future-work" title="Conclusion and future work">Conclusion and future work</a></li>
<li><a href="#References" title="References">References</a></li>
<li class=""><a href="#Appendix" title="Appendix">Appendix</a><ul class="nav">
<li><a href="#downloaderpy" title="downloader.py">downloader.py</a></li>
<li><a href="#filterpy" title="filter.py">filter.py</a></li>
<li><a href="#reporterpy" title="reporter.py">reporter.py</a></li>
<li class=""><a href="#submitter_propy" title="submitter_pro.py">submitter_pro.py</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;"  >
        <div class="toc"><ul class="nav">
<li class=""><a href="#CCF-Project-Collection-of-malware-dynamic-analysis-data-for-implementing-behavioral-malware-detection-based-on-Recurrent-neural-network" title="CCF Project: Collection of malware dynamic analysis data for implementing behavioral malware detection based on Recurrent neural network">CCF Project: Collection of malware dynamic analysis data for implementing behavioral malware detection based on Recurrent neural network</a></li>
<li class=""><a href="#Abstract" title="Abstract">Abstract</a></li>
<li class=""><a href="#Introduction" title="Introduction">Introduction</a></li>
<li class=""><a href="#Novelty" title="Novelty">Novelty</a></li>
<li class=""><a href="#Related-work" title="Related work">Related work</a></li>
<li class=""><a href="#Project-goals" title="Project goals">Project goals</a></li>
<li class=""><a href="#Collection-of-malware-dynamic-analysis-data-for-implementing-behavioral-malware-detection-based-on-Recurrent-neural-network" title="Collection of malware dynamic analysis data for implementing behavioral malware detection based on Recurrent neural network">Collection of malware dynamic analysis data for implementing behavioral malware detection based on Recurrent neural network</a><ul class="nav">
<li class=""><a href="#Dynamic-executable-data" title="Dynamic executable data">Dynamic executable data</a></li>
<li class=""><a href="#Dynamic-analysis-in-open-source-solutions" title="Dynamic analysis in open-source solutions">Dynamic analysis in open-source solutions</a></li>
<li><a href="#Data-collection" title="Data collection">Data collection</a><ul class="nav">
<li><a href="#Malwares" title="Malwares">Malwares</a></li>
<li><a href="#Legitimate-files" title="Legitimate files">Legitimate files</a></li>
<li><a href="#Cuckoo-analysis" title="Cuckoo analysis">Cuckoo analysis</a></li>
</ul>
</li>
<li><a href="#Preparations-of-collected-data" title="Preparations of collected data">Preparations of collected data</a></li>
<li><a href="#Training-RNN" title="Training RNN">Training RNN</a></li>
<li class=""><a href="#Proof-of-concept-application" title="Proof of concept application">Proof of concept application</a></li>
</ul>
</li>
<li><a href="#Conclusion-and-future-work" title="Conclusion and future work">Conclusion and future work</a></li>
<li><a href="#References" title="References">References</a></li>
<li class=""><a href="#Appendix" title="Appendix">Appendix</a><ul class="nav">
<li><a href="#downloaderpy" title="downloader.py">downloader.py</a></li>
<li><a href="#filterpy" title="filter.py">filter.py</a></li>
<li><a href="#reporterpy" title="reporter.py">reporter.py</a></li>
<li class=""><a href="#submitter_propy" title="submitter_pro.py">submitter_pro.py</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
